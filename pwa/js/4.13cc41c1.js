(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"713b":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-layout",{attrs:{view:"hHh LpR fFf"}},[a("q-header",{attrs:{elevated:""}},[a("q-toolbar",[a("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"account_circle",size:"1.05rem","aria-label":"Account"},on:{click:function(t){e.leftDrawerOpen=!e.leftDrawerOpen}}}),a("q-toolbar-title",{staticClass:"text-center"},[a("q-avatar",{staticStyle:{width:"150px"},attrs:{square:""}},[a("img",{attrs:{alt:"App Logo",src:"logos/head-logo.png"}})])],1),a("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"filter_alt",size:"1.05rem","aria-label":"Tags"},on:{click:function(t){e.rightDrawerOpen=!e.rightDrawerOpen}}})],1)],1),a("q-drawer",{attrs:{"show-if-above":"",bordered:"",side:"left","content-class":"bg-grey-1"},model:{value:e.leftDrawerOpen,callback:function(t){e.leftDrawerOpen=t},expression:"leftDrawerOpen"}},[a("Menu")],1),a("q-drawer",{attrs:{"show-if-above":"",bordered:"",side:"right","content-class":"bg-grey-1"},model:{value:e.rightDrawerOpen,callback:function(t){e.rightDrawerOpen=t},expression:"rightDrawerOpen"}},[a("Tags")],1),a("q-page-container",[a("transition",{attrs:{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[a("router-view")],1)],1)],1)},i=[],s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-list",[a("q-item-label",{staticClass:"text-grey-8",attrs:{header:""}},[e._v("\n      "+e._s(e.$t("Hello"))+", "),a("span",{staticClass:"text-primary"},[e._v(e._s(e.username))])]),e._l(e.userInfoRows,(function(t,r){return a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:r,attrs:{clickable:""},on:{click:function(a){return e.showUserInfo(t,r)}}},[t.icon?a("q-item-section",{attrs:{avatar:"",top:""}},[a("q-avatar",{attrs:{size:"md",icon:t.icon,color:"grey-5","text-color":"white"}})],1):e._e(),a("q-item-section",[a("q-item-label",[e._v(e._s(t.title))]),a("q-item-label",{attrs:{caption:""}},[void 0!==t.value?a("div",[e._v(e._s(t.value))]):a("q-skeleton",{attrs:{type:"text",animation:"wave",width:t.skeletonWidth||"2rem"}})],1)],1)],1)})),this.isUserLogined?a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.logout}},[a("q-item-section",{attrs:{avatar:"",top:""}},[a("q-avatar",{attrs:{size:"md",icon:"eject",color:"grey-5","text-color":"white"}})],1),a("q-item-section",[a("q-item-label",[e._v(e._s(e.$t("menuLabelSignOut")))])],1)],1):e._e(),a("q-separator",{attrs:{spaced:""}}),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple:primary",arg:"primary"}],attrs:{clickable:"",to:{name:"payments"}}},[a("q-item-section",{attrs:{avatar:"",top:""}},[a("q-avatar",{attrs:{size:"md",icon:"grade",color:"primary","text-color":"white"}})],1),a("q-item-section",[a("q-item-label",[e._v(e._s(e.$t("menuLabelJoinVip")))])],1)],1),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple:orange-5",arg:"orange-5"}],attrs:{clickable:"",to:{name:"help"}}},[a("q-item-section",{attrs:{avatar:"",top:""}},[a("q-avatar",{attrs:{size:"md",icon:"contact_support",color:"orange-5","text-color":"white"}})],1),a("q-item-section",[a("q-item-label",[e._v(e._s(e.$t("menuLabelHelpCenter")))])],1)],1),e.isEnvPwa?e._e():a("q-item",{directives:[{name:"ripple",rawName:"v-ripple:deep-orange-12",arg:"deep-orange-12"}],attrs:{clickable:"",tag:"a",target:"_blank",rel:"noopener",href:e.downloadAppUrl}},[a("q-item-section",{attrs:{avatar:"",top:""}},[a("q-avatar",{attrs:{size:"md",icon:"get_app",color:"deep-orange-12","text-color":"white"}})],1),a("q-item-section",[a("q-item-label",[e._v(e._s(e.$t("menuLabelGetApp")))])],1)],1),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple:blue-5",arg:"blue-5"}],attrs:{clickable:""}},[a("q-item-section",{attrs:{avatar:"",top:""}},[a("q-avatar",{attrs:{size:"md",icon:"translate",color:"blue-5","text-color":"white"}})],1),a("q-item-section",[a("langSelect")],1)],1)],2)],1)},o=[],n=(a("e6cf"),a("5319"),a("843c")),l={name:"Menu",components:{langSelect:n["a"]},data(){return{}},computed:{essentialInfo(){return{level:{title:this.$t("menuLabelLevel"),value:void 0,icon:"format_list_numbered",skeletonWidth:"2rem"},exp:{title:this.$t("menuLabelExp"),value:void 0,icon:"exposure_plus_1",skeletonWidth:"2rem"},keysDaily:{title:this.$t("menuLabelKeysDaily"),value:void 0,icon:"vpn_key",skeletonWidth:"3rem"},keysRemaining:{title:this.$t("menuLabelKeysRemaining"),value:void 0,icon:"hourglass_bottom",skeletonWidth:"2rem"},vipStatus:{title:this.$t("menuLabelVipStatus"),value:void 0,icon:"star_border",skeletonWidth:"4rem"}}},isEnvPwa(){return!0},isUserLogined(){return this.$apc.isUserLogined()},accountUserData(){const e=this.$store.state.api.userAccount||{};return e},username(){return this.accountUserData.username||this.$t("Guest")},userInfoRows(){const e=this.essentialInfo,t=this.accountUserData.video_user||{};return e.level.value=t.level,e.exp.value=t.level_xp,e.keysDaily.value=t.daily_coins,e.keysRemaining.value=t.coin,t.is_vip?(e.vipStatus.title=`${t.product_item.name}`,e.vipStatus.value=this.$t("varsWillExpireAtDate",{expireAt:t.vip_expired_at})):(e.vipStatus.title=this.$t("menuLabelVipStatus"),e.vipStatus.value=this.isUserLogined?this.$t("Regular user"):void 0),e},downloadAppUrl(){return this.$apc.appConfig.get("downloadAppUrl")}},methods:{async processLogout(){return await this.$apc.authApi("video_user/logout"),this.$apc.clearAuthInStorage(),this.$store.commit("api/resetState"),this.$store.commit("dialogs/resetState"),this.$store.commit("home/resetState"),await this.$router.replace({name:"login"}),!0},closeLeftDrawer(){const e=!this.$q.platform.is.mobile;setTimeout((()=>{this.$store.commit("home/updateLeftDrawerOpen",e)}),1e3)},showUserInfo(e,t){if(!this.accountUserData.video_user)return void this.$store.commit("dialogs/showDialog","UserEntry");const a=this.$t("varsNotifyUserInfo",{title:e.title,value:e.value});this.$apc.notifyInfo(a)},logout(){this.processLogout().catch((e=>{const t=JSON.stringify(e);console.log(`Process failed: ${t}`)}))}}},c=l,p=a("2877"),u=a("1c1c"),m=a("0170"),d=a("66e5"),h=a("4074"),g=a("cb32"),v=a("293e"),f=a("eb85"),b=a("714f"),w=a("eebe"),_=a.n(w),q=Object(p["a"])(c,s,o,!1,null,null,null),k=q.exports;_()(q,"components",{QList:u["a"],QItemLabel:m["a"],QItem:d["a"],QItemSection:h["a"],QAvatar:g["a"],QSkeleton:v["a"],QSeparator:f["a"]}),_()(q,"directives",{Ripple:b["a"]});var $=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-pa-md q-gutter-sm flex justify-between"},[a("q-btn",{attrs:{icon:"update",padding:"3px 10px 3px 6px",color:"teal-3","text-color":"grey-1",label:e.$t("btnLabelRecent"),unelevated:!e.isCheckedTag("filter_latest")},on:{click:function(t){return e.checkTag("filter_latest")}}}),a("q-btn",{attrs:{icon:"wb_sunny",padding:"3px 10px 3px 6px",color:"orange-3","text-color":"grey-1",label:e.$t("btnLabelHot"),unelevated:!e.isCheckedTag("filter_hottest")},on:{click:function(t){return e.checkTag("filter_hottest")}}}),a("q-btn",{attrs:{icon:"favorite",padding:"3px 10px 3px 6px",color:"red-3","text-color":"grey-1",label:e.$t("btnLabelFavorites"),unelevated:!e.isCheckedTag("filter_favorite")},on:{click:function(t){return e.checkTag("filter_favorite")}}}),a("q-separator",{staticClass:"full-width",attrs:{spaced:""}}),e._l(e.tags,(function(t){return a("q-btn",{key:t,attrs:{"no-caps":"",padding:"3px 8px",color:e.isCheckedTag(t)?"pink-3":"grey-3","text-color":e.isCheckedTag(t)?"white":"grey-7",label:t,unelevated:!e.isCheckedTag(t)},on:{click:function(a){return e.checkTag(t)}}})}))],2)},x=[],y={name:"Tags",data(){return{tags:[]}},created(){this.processGetTags().catch((e=>{const t=JSON.stringify(e);console.log(`Process failed: ${t}`)}))},methods:{async processGetTags(){const e={limit:100},t=await this.$apc.api("video_tag/gethottags",e);return this.tags=t.hot_tags||[],this.tags},closeRightDrawer(){const e=!this.$q.platform.is.mobile;setTimeout((()=>{this.$store.commit("home/updateRightDrawerOpen",e)}),1e3)},getCheckedTag(){return this.$route.params.tag||"filter_latest"},isCheckedTag(e){return e===this.getCheckedTag()},checkTag(e){e!==this.getCheckedTag()?this.$router.replace({name:"tag",params:{tag:e}}):this.closeRightDrawer()}}},D=y,L=a("9c40"),T=Object(p["a"])(D,$,x,!1,null,null,null),S=T.exports;_()(T,"components",{QBtn:L["a"],QSeparator:f["a"]});var O={name:"MainLayout",components:{Menu:k,Tags:S},data(){return{}},computed:{leftDrawerOpen:{get(){return this.$store.state.home.leftDrawerOpen},set(e){this.$store.commit("home/updateLeftDrawerOpen",e)}},rightDrawerOpen:{get(){return this.$store.state.home.rightDrawerOpen},set(e){this.$store.commit("home/updateRightDrawerOpen",e)}},isEnvPwa(){return!0},isIosSafari(){return this.$q.platform.is.ios&&this.$q.platform.is.safari},isInWebAppIos(){return!0===window.navigator.standalone},shouldShowAddToHomeScreen(){return!(!this.isEnvPwa||!this.isIosSafari||this.isInWebAppIos)}},mounted(){this.shouldShowAddToHomeScreen&&this.$store.commit("dialogs/showDialog","AddToHomeScreen")}},I=O,A=a("4d5a"),C=a("e359"),Q=a("65c6"),U=a("6ac5"),R=a("9404"),E=a("09e3"),N=Object(p["a"])(I,r,i,!1,null,null,null);t["default"]=N.exports;_()(N,"components",{QLayout:A["a"],QHeader:C["a"],QToolbar:Q["a"],QBtn:L["a"],QToolbarTitle:U["a"],QAvatar:g["a"],QDrawer:R["a"],QPageContainer:E["a"]})}}]);