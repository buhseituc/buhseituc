(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{4081:function(t,e,s){"use strict";s("922a")},"487d":function(t,e,s){"use strict";s("a7fc")},"6b95":function(t,e,s){"use strict";s("995e")},"6c03":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-btn",{attrs:{padding:"5px 10px",color:t.color,size:t.size,flat:t.flat,label:t.btnLabel},on:{click:t.copyToClipboard}})},i=[],n=s("cdde"),o={name:"CopyButton",props:{text:[Function,String],color:{type:String,default:"primary"},size:{type:String,default:"sm"},flat:{type:Boolean,default:!1}},data(){return{copied:!1,btnLabel:this.$t("btnLabelCopy")}},methods:{copyToClipboard(){const t=this.$q.platform.is.mobile?"bottom":"top-right";Object(n["a"])("string"===typeof this.text?this.text:this.text()).then((()=>{this.copied=!0,this.$q.notify({icon:"sentiment_satisfied_alt",message:this.$t("Copy successfully"),position:t,timeout:2e3})})).catch((()=>{this.copied=!1,this.$q.notify({icon:"sentiment_very_dissatisfied",message:this.$t("Copy failed, please copy it manually"),position:t,timeout:2e3})}))}}},r=o,l=s("2877"),c=s("9c40"),m=s("eebe"),h=s.n(m),u=Object(l["a"])(r,a,i,!1,null,null,null);e["a"]=u.exports;h()(u,"components",{QBtn:c["a"]})},9224:function(t){t.exports=JSON.parse('{"a":"CutiesHub"}')},"922a":function(t,e,s){},"995e":function(t,e,s){},a7fc:function(t,e,s){},d0d1:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{staticClass:"flex flex-center",attrs:{padding:""}},[s("div",{staticClass:"full-width q-pa-none q-gutter-y-sm"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("p",{staticClass:"text-h6 text-weight-medium text-grey-8"},[t._v("\n          "+t._s(t.storedItem.title)+"\n        ")])]),s("div",{staticClass:"col-12"},[s("div",{staticClass:"text-grey-7"},[t._v("\n          "+t._s(t.storedItem.desc)+"\n        ")]),t.importantTips?s("div",{staticClass:"text-caption text-grey-7",domProps:{innerHTML:t._s(t.importantTips)}}):t._e(),t.copyText?s("div",{staticClass:"text-grey-7"},[s("q-bar",{staticClass:"transparent q-px-none"},[s("span",{staticClass:"text-body2 text-primary"},[t._v("\n              "+t._s(t.copyText)+"\n            ")]),s("q-space"),s("CopyButton",{attrs:{text:t.copyText}})],1)],1):t._e()])]),s("Player",{staticClass:"q-mt-none"}),s("CommentInput",{staticClass:"q-mt-md"}),s("CommentTab"),s("div",{staticClass:"row q-mt-md"},[s("div",{staticClass:"col-12 q-gutter-x-sm"},t._l(t.storedItem.tag_names,(function(e,a){return s("q-btn",{key:a,attrs:{padding:"3px 8px",color:"grey-3","text-color":"grey-7",unelevated:"",label:e},on:{click:function(s){return t.checkTag(e)}}})})),1)]),s("Copyright")],1),s("q-page-scroller",{staticStyle:{"z-index":"1000",opacity:".85"},attrs:{position:"bottom-right","scroll-offset":150,offset:[18,18]}},[s("q-btn",{attrs:{"fab-mini":"",icon:"keyboard_arrow_up",color:"red-3"}})],1)],1)},i=[],n=(s("5319"),s("e6cf"),s("6c03")),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row q-gutter-y-sm"},[s("q-responsive",{directives:[{name:"show",rawName:"v-show",value:t.unlocked,expression:"unlocked"}],staticClass:"col-12",style:t.playerBoxStyleObj,attrs:{ratio:t.item.$imageRatio}},[s("q-card",{staticClass:"column",attrs:{id:"player-container",dark:""}},[s("video",{attrs:{id:"player",playsinline:"",controls:""}}),s("div",{staticClass:"absolute-full no-pointer-events",attrs:{id:"danmaku-container"}}),s("div",{staticClass:"absolute-top-right"},[s("q-btn",{directives:[{name:"show",rawName:"v-show",value:t.isPlayerControlsShown,expression:"isPlayerControlsShown"}],staticClass:"q-ma-sm",attrs:{unelevated:"",round:"",color:"mask",icon:t.isDanmakuShown?"speaker_notes":"speaker_notes_off"},on:{click:t.toggleDanmaku}},[s("q-tooltip",[t._v(t._s(t.isDanmakuShown?t.$t("Enable danmaku"):t.$t("Disable danmaku")))])],1)],1),s("q-resize-observer",{on:{resize:t.onResizePlayer}})],1)],1),s("q-responsive",{directives:[{name:"show",rawName:"v-show",value:!t.unlocked,expression:"!unlocked"}],staticClass:"col-12",style:t.playerBoxStyleObj,attrs:{ratio:t.item.$imageRatio}},[s("q-card",{staticClass:"column overflow-hidden",attrs:{dark:""},on:{click:t.unlock}},[t.isVipItem?s("q-badge",{staticClass:"absolute-top-right player-badge-radius",attrs:{color:"orange-6",floating:"",transparent:""}},[t._v("\n        VIP\n      ")]):t._e(),t.item.$gifFullUrl?s("q-img",{staticClass:"player-img-radius",attrs:{src:t.item.$gifFullUrl,ratio:t.item.$imageRatio,contain:t.posterImgContain,"spinner-color":"grey-4","spinner-size":"3rem"}}):s("q-img",{staticClass:"player-img-radius",attrs:{src:t.item.$coverFullUrl,ratio:t.item.$imageRatio,contain:t.posterImgContain,"spinner-color":"grey-4","spinner-size":"3rem"}}),s("div",{staticClass:"player-mask-radius fit bg-mask absolute-center"},[s("div",{staticClass:"absolute-center"},[s("transition",{attrs:{appear:"","enter-active-class":"animated swing"}},[s("q-btn",{attrs:{loading:t.unlocking,icon:"lock",size:"lg",dense:"",round:"",flat:""},scopedSlots:t._u([{key:"loading",fn:function(){return[s("q-icon",{staticClass:"unlocking-key",attrs:{name:"vpn_key",size:"md"}})]},proxy:!0}])},[s("q-badge",{attrs:{color:"red",floating:"",transparent:""}},[t._v("\n                "+t._s(t.item.coin)+"\n              ")])],1)],1)],1)])],1)],1),s("Album",{staticStyle:{height:"75px"},attrs:{horizontal:"",images:t.albumImgs}}),s("q-dialog",{attrs:{persistent:""},on:{hide:t.onDialogGetKeysGuideHide},model:{value:t.dialogGetKeysGuide,callback:function(e){t.dialogGetKeysGuide=e},expression:"dialogGetKeysGuide"}},[s("q-card",[s("q-bar",{staticClass:"bg-primary text-white",staticStyle:{height:"auto","min-height":"32px"}},[s("div",[t._v(t._s(t.$t("How to unlock more videos")))]),s("q-space"),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[s("q-tooltip",[t._v(t._s(t.$t("Close")))])],1)],1),s("q-card-section",[s("q-banner",{staticClass:"bg-grey-5 text-white q-mb-md",attrs:{rounded:"",dense:""}},[t._v("\n          "+t._s(t.userKeysDailyMsg)+"\n          "),s("q-icon",{attrs:{name:"vpn_key"}})],1),s("q-list",[s("q-expansion-item",{attrs:{"default-opened":"","expand-separator":""},scopedSlots:t._u([{key:"header",fn:function(){return[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",{attrs:{size:"md",icon:"north",color:"secondary","text-color":"white"}})],1),s("q-item-section",[s("div",{staticClass:"text-secondary"},[t._v(t._s(t.$t("Level Up")))])])]},proxy:!0}])},[s("q-card",[s("q-card-section",[s("div",[t._v("\n                  "+t._s(t.$t("Posting comments, danmaku, or unlocking videos will increase experience points."))+"\n                  "+t._s(t.$t("When you level up, your daily number of keys will increase."))+"\n                ")])])],1)],1),s("q-expansion-item",{attrs:{"default-opened":"","expand-separator":""},scopedSlots:t._u([{key:"header",fn:function(){return[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",{attrs:{size:"md",icon:"grade",color:"orange-6","text-color":"white"}})],1),s("q-item-section",[s("div",{staticClass:"text-orange-6"},[t._v(t._s(t.$t("Join VIP")))])])]},proxy:!0}])},[s("q-card",[s("q-card-section",[s("div",[t._v("\n                  "+t._s(t.$t("Upgrade your account to VIP and you will get keys immediately."))+"\n                  "+t._s(t.$t("Click the button below to join VIP now."))+"\n                ")]),s("div",{staticClass:"q-mt-md"},[s("q-btn",{attrs:{color:"orange-6",label:t.$t("menuLabelJoinVip")},on:{click:t.gotoPayments}})],1)])],1)],1)],1)],1)],1)],1)],1)},r=[],l=s("7053"),c=s.n(l),m=(s("a79d"),s("ca79")),h=s.n(m),u=s("01d0"),d=s.n(u),p=s("f405"),g={name:"Player",components:{Album:p["a"]},data(){return{danmakuLoadedPageNums:[],isPlayerControlsShown:!0,isDanmakuShown:!0,iconUrl:"https://cdn.jsdelivr.net/npm/plyr@3.6.3/dist/plyr.svg",blankVideo:"https://cdn.jsdelivr.net/npm/plyr@3.6.3/dist/blank.mp4",dialogGetKeysGuide:!1,unlocking:!1,viewStats:{recorded:!1,totalViewingTime:0,lastCurrentTimeSecs:0}}},computed:{isUserLogined(){return this.$apc.isUserLogined()},username(){const t=this.$store.state.api.userAccount||{};return t.username||this.$t("Guest")},hashId(){return this.$route.params.itemId},userKeysDaily(){const t=this.$store.state.api.userAccount||{},e=t.video_user||{},s=e.daily_coins;return s},userKeysDailyMsg(){const t=this.$t("varsNotifyUserInfo",{title:this.$t("menuLabelKeysDaily"),value:this.userKeysDaily});return t},item(){return this.$store.state.api.pageItemList[this.hashId]||{}},isVipItem(){return!!this.item.vip_only},unlockInfo:{get(){return this.$store.state.api.pageUnlockInfo[this.hashId]||{}},set(t){const e=c()(c()({},t),{hashId:this.hashId});this.$store.commit("api/updatePageUnlockInfo",e)}},unlocked(){return this.$store.getters["api/isVideoUnlocked"](this.hashId)},videoMeta(){return this.item.meta||{}},albumImgs(){return this.videoMeta.pic_full_urls},playerBoxStyleObj(){return{"max-height":this.$q.platform.is.mobile?"90vh":"450px"}},posterImgContain(){return!this.$q.platform.is.mobile&&this.item.$isPortrait}},mounted(){this.initPlayer()},methods:{async processUnlock(){const t={hash_id:this.hashId},e=await this.$apc.authApi("video_user/unlock",t);if(e.unlocked_at){const t=e.expired_timestamp-e.unlocked_timestamp,s=Date.now(),a=s+1e3*t;this.unlockInfo={unlockedTimestamp:s,expiredTimestamp:a,unlockedUrl:e.unlocked_url},this.setPlayerSource(this.unlockInfo.unlockedUrl)}return await this.$apc.refreshUserAccount(),e},async processLoadDanmaku(t){if(t<=0)return;const e=this.$apc.getDanmakuInst(this.hashId);if(!e)return;const s=Math.ceil(t/60);if(this.danmakuLoadedPageNums.includes(s))return;this.danmakuLoadedPageNums.push(s);const a={hash_id:this.hashId,video_time_from:60*(s-1),video_time_to:60*s,limit:500},i=await this.$apc.api("video_barrage/list",a),n=i.list.data;n&&n.forEach((t=>{e.emit({text:t.content,time:t.video_time})}))},async processLogView(){const t={hash_id:this.hashId},e=await this.$apc.authApi("video_user/logview",t);return e},unlock(){this.$gtag.event("unlock",{event_category:"click",event_label:this.username+":"+this.item.title}),this.isUserLogined?(this.unlocking=!0,this.processUnlock().catch((t=>{(this.$apc.apiNotEnoughKeysError(t)||this.$apc.apiNotVipToUnlockError(t))&&(this.$apc.notifyInfo(this.userKeysDailyMsg,"center"),this.$router.push({name:"payments"}).catch((t=>{console.log(t)})));const e=JSON.stringify(t);console.log(`Process failed: ${e}`)})).finally((()=>{this.unlocking=!1}))):this.$store.commit("dialogs/showDialog","UserEntry")},gotoPayments(){this.$gtag.event("goto_payments_page",{event_category:"click",event_label:this.username+":"+this.item.title}),this.$router.replace({name:"payments"})},playerConfig(){const t=this.$q.platform.is.mobile,e={iconUrl:this.iconUrl,blankVideo:this.blankVideo,fullscreen:{enabled:!0,fallback:!0,iosNative:!0,container:null},controls(){let e=[];return e=t?["play-large","play","progress","current-time","duration","mute","volume","settings","pip","fullscreen"]:["play-large","restart","rewind","play","fast-forward","progress","current-time","duration","mute","volume","settings","pip","fullscreen"],e}};return e},initPlayer(t){t||(t=this.unlocked?this.unlockInfo.unlockedUrl:this.blankVideo),this.$apc.destroyPlyrInst(this.hashId);const e=new h.a("#player",this.playerConfig());e.on("ready",(t=>{this.initDanmaku()})),e.on("controlshidden",(t=>{this.isPlayerControlsShown=!1})),e.on("controlsshown",(t=>{this.isPlayerControlsShown=!0})),e.on("timeupdate",(t=>{const e=t.detail.plyr;this.processLoadDanmaku(e.currentTime).catch((t=>{const e=JSON.stringify(t);console.log(`Process failed: ${e}`)}));const s=this.viewStats.lastCurrentTimeSecs!==Math.floor(e.currentTime);if(this.unlocked&&!this.viewStats.recorded&&s){this.viewStats.totalViewingTime++;const t=e.duration>10&&e.currentTime>e.duration-10,s=this.viewStats.totalViewingTime>=120||t&&this.viewStats.totalViewingTime>=60;s&&(this.viewStats.recorded=!0,this.processLogView().catch((t=>{const e=JSON.stringify(t);console.log(`Process failed: ${e}`)})))}this.viewStats.lastCurrentTimeSecs=Math.floor(e.currentTime)})),this.$apc.exposePlyrInst(this.hashId,e),this.setPlayerSource(t)},setPlayerSource(t){let e;if("object"!==typeof t||t instanceof Event){const s=t||this.blankVideo;e={type:"video",sources:[{src:s,type:"video/mp4"}]}}else e=t;const s=this.$apc.getPlyrInst(this.hashId);s instanceof h.a&&(s.source=e)},initDanmaku(){this.$apc.destroyDanmakuInst(this.hashId);const t=new d.a({container:document.getElementById("danmaku-container"),media:document.getElementById("player-container").querySelector("video"),comments:[],engine:"dom",speed:100});this.$apc.exposeDanmakuInst(this.hashId,t)},toggleDanmaku(){const t=this.$apc.getDanmakuInst(this.hashId);t instanceof d.a&&(this.isDanmakuShown=!this.isDanmakuShown,this.isDanmakuShown?(t.show(),this.$apc.notifySuccess("Danmaku enabled","bottom")):(t.hide(),this.$apc.notifySuccess("Danmaku disabled","bottom")))},onResizePlayer(){const t=this.$apc.getDanmakuInst(this.hashId);t instanceof d.a&&t.resize()},onDialogGetKeysGuideHide(){}}},y=g,f=(s("4081"),s("2877")),b=s("0e51"),v=s("f09f"),k=s("9c40"),_=s("05c0"),I=s("3980"),$=s("58a81"),C=s("068f"),x=s("0016"),w=s("24e8"),S=s("d847"),q=s("2c91"),P=s("a370"),L=s("54e1"),T=s("1c1c"),D=s("3b73"),Q=s("4074"),U=s("cb32"),z=s("7f67"),O=s("eebe"),N=s.n(O),j=Object(f["a"])(y,o,r,!1,null,"d31066f8",null),A=j.exports;N()(j,"components",{QResponsive:b["a"],QCard:v["a"],QBtn:k["a"],QTooltip:_["a"],QResizeObserver:I["a"],QBadge:$["a"],QImg:C["a"],QIcon:x["a"],QDialog:w["a"],QBar:S["a"],QSpace:q["a"],QCardSection:P["a"],QBanner:L["a"],QList:T["a"],QExpansionItem:D["a"],QItemSection:Q["a"],QAvatar:U["a"]}),N()(j,"directives",{ClosePopup:z["a"]});var B=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 qideo-comment-input"},[s("q-input",{staticClass:"shadow-1 rounded-borders bg-white overflow-hidden q-px-sm",attrs:{"input-style":{"max-height":"102px"},autogrow:"",dense:"",clearable:"",placeholder:t.$t("Please enter content"),color:"primary","hide-bottom-space":"",counter:!!t.inputText},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{dense:"",name:"comment",color:"grey-5"}})]},proxy:!0},{key:"append",fn:function(){return[s("q-btn",{attrs:{loading:t.commentLoading,unelevated:"",padding:"5px 10px",color:"primary",size:"sm",label:t.$t("btnLabelComment")},on:{click:t.submitComment}}),t.inputText?s("q-btn",{attrs:{loading:t.danmakuLoading,unelevated:"",padding:"5px 10px",color:"primary",size:"sm",label:t.$t("btnLabelDanmaku")},on:{click:t.submitDanmaku}}):t._e()]},proxy:!0}]),model:{value:t.inputText,callback:function(e){t.inputText=e},expression:"inputText"}})],1)])},V=[],E={name:"CommentInput",data(){return{inputText:"",commentLoading:!1,danmakuLoading:!1}},computed:{hashId(){return this.$route.params.itemId},unlockInfo(){return this.$store.state.api.pageUnlockInfo[this.hashId]||{}},unlocked(){return this.$store.getters["api/isVideoUnlocked"](this.hashId)}},methods:{async processSubmitComment(){const t={hash_id:this.hashId,content:this.inputText},e=await this.$apc.authApi("video_comment/add",t);return e.comment&&(this.$store.commit("api/pushPageComment",{hashId:this.hashId,item:e.comment}),this.inputText=""),await this.$apc.refreshUserAccount(),e},async processSubmitDanmaku(){if(!this.unlocked)return this.$apc.notifyInfo(this.$t("Danmaku can be sent after unlocking the video"));const t=this.$apc.getPlyrInst(this.hashId),e=this.$apc.getDanmakuInst(this.hashId);if(!t)return this.$apc.notifyInfo(this.$t("The player component is not initialized"));if(!e)return this.$apc.notifyInfo(this.$t("The danmaku component is not initialized"));if(t.currentTime<1)return this.$apc.notifyInfo(this.$t("The video has not started"));const s={hash_id:this.hashId,content:this.inputText,video_time:t.currentTime},a=await this.$apc.authApi("video_barrage/add",s);return a.barrage&&(this.$store.commit("api/pushPageDanmaku",{hashId:this.hashId,item:a.barrage}),e.emit({text:a.barrage.content,time:a.barrage.video_time}),this.inputText=""),await this.$apc.refreshUserAccount(),a},submitComment(){this.commentLoading=!0,this.processSubmitComment().catch((t=>{const e=JSON.stringify(t);console.log(`Process failed: ${e}`)})).finally((()=>{this.commentLoading=!1}))},submitDanmaku(){this.danmakuLoading=!0,this.processSubmitDanmaku().catch((t=>{const e=JSON.stringify(t);console.log(`Process failed: ${e}`)})).finally((()=>{this.danmakuLoading=!1}))}}},M=E,G=(s("487d"),s("27f9")),J=s("8572"),K=Object(f["a"])(M,B,V,!1,null,null,null),R=K.exports;N()(K,"components",{QInput:G["a"],QIcon:x["a"],QBtn:k["a"],QField:J["a"]});var F=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",[s("q-tabs",{staticClass:"text-grey",attrs:{dense:"","inline-label":"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[s("q-tab",{attrs:{name:"commentList",label:t.$t("tabLabelComment")}}),s("q-tab",{attrs:{name:"danmakuList",label:t.$t("tabLabelDanmaku")}})],1),s("q-separator"),s("q-tab-panels",{staticClass:"qideo-comment-tab-panels",staticStyle:{height:"300px"},attrs:{"keep-alive":"",animated:""},on:{transition:t.onPanelChanged},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[s("q-tab-panel",{attrs:{name:"commentList"}},[s("q-scroll-area",{ref:"commentScrollArea",staticClass:"fit",attrs:{"bar-style":t.scrollBarStyleObj,"thumb-style":t.scrollThumbStyleObj},on:{scroll:t.onCommentScroll}},[s("CommentItems")],1)],1),s("q-tab-panel",{attrs:{name:"danmakuList"}},[s("q-scroll-area",{ref:"danmakuScrollArea",staticClass:"fit",attrs:{"bar-style":t.scrollBarStyleObj,"thumb-style":t.scrollThumbStyleObj},on:{scroll:t.onDanmakuScroll}},[s("DanmakuItems")],1)],1)],1)],1)},H=[],W=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-infinite-scroll",{attrs:{offset:250},on:{load:t.onPageLoad},scopedSlots:t._u([{key:"loading",fn:function(){return[s("div",{staticClass:"row justify-center q-my-md"},[s("q-spinner-dots",{attrs:{color:"primary",size:"40px"}})],1)]},proxy:!0}])},[s("q-list",t._l(t.allComments,(function(e,a){return s("div",{key:a},[s("q-item",{staticClass:"q-px-none"},[s("q-item-section",[s("q-item-label",[t._v(t._s(e.username))]),s("q-item-label",{attrs:{caption:"",lines:t.linesLimit(a)},on:{click:function(e){return t.toggleLinesLimit(a)}}},[t._v("\n            "+t._s(e.content)+"\n          ")])],1),s("q-item-section",{attrs:{side:"",top:""}},[s("q-btn",{attrs:{flat:"",round:"",densed:"",color:"grey-5",size:"sm",icon:"thumb_up"},on:{"~click":function(s){return t.thumbsUp(e.id)}}}),s("q-item-label",{staticClass:"q-pr-sm",attrs:{caption:""}},[t._v(t._s(e.thumbs_up))])],1)],1),s("q-separator",{staticClass:"q-ml-none",attrs:{spaced:"",inset:""}})],1)})),0),t.noCommentsToShow?s("div",{staticClass:"row q-my-sm"},[s("div",{staticClass:"col flex flex-center",staticStyle:{"min-height":"235px"}},[s("div",{staticClass:"text-subtitle2",staticStyle:{opacity:".4"}},[t._v("\n        "+t._s(t.$t("No comments yet"))+"\n      ")])])]):t._e()],1)},X=[],Y={name:"CommentItems",props:{minLinesLimit:{type:Number,default:2},maxLinesLimit:{type:Number,default:10}},data(){return{pageNum:0,pageItems:[],noMorePages:!1,allLinesLimits:{}}},computed:{hashId(){return this.$route.params.itemId},allComments(){return this.$store.state.api.pageCommentList[this.hashId]||[]},noCommentsToShow(){return this.noMorePages&&this.allComments.length<1}},methods:{async processLoadPage(t,e){this.pageNum=t;const s={hash_id:this.hashId,limit:20,page:this.pageNum},a=await this.$apc.api("video_comment/list",s);return this.pageItems=a.list.data,this.pageItems&&this.pageItems.forEach((t=>{this.$store.commit("api/pushPageComment",{hashId:this.hashId,item:t})})),this.noMorePages=!a.list.next_page_url,e(this.noMorePages),this.pageItems},onPageLoad(t,e){this.processLoadPage(t,e).catch((t=>{const s=JSON.stringify(t);console.log(`Process failed: ${s}`),e(!0)}))},linesLimit(t){return"undefined"===typeof this.allLinesLimits[t]&&this.$set(this.allLinesLimits,t,this.minLinesLimit),this.allLinesLimits[t]},toggleLinesLimit(t){this.allLinesLimits[t]<=this.minLinesLimit?this.$set(this.allLinesLimits,t,this.maxLinesLimit):this.$set(this.allLinesLimits,t,this.minLinesLimit)},async processThumbsUp(t){const e=await this.$apc.authApi("video_comment/thumbsup",{comment_id:t}),s=e.thumbs_up;return this.$store.commit("api/updatePageCommentById",{hashId:this.hashId,commentId:t,updateFields:{thumbs_up:s}}),s},thumbsUp(t){this.processThumbsUp(t).catch((t=>{const e=JSON.stringify(t);console.log(`Process failed: ${e}`)}))}}},Z=Y,tt=s("ef35"),et=s("66e5"),st=s("0170"),at=s("eb85"),it=s("8380"),nt=Object(f["a"])(Z,W,X,!1,null,null,null),ot=nt.exports;N()(nt,"components",{QInfiniteScroll:tt["a"],QList:T["a"],QItem:et["a"],QItemSection:Q["a"],QItemLabel:st["a"],QBtn:k["a"],QSeparator:at["a"],QSpinnerDots:it["a"]});var rt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-infinite-scroll",{attrs:{offset:250},on:{load:t.onPageLoad},scopedSlots:t._u([{key:"loading",fn:function(){return[s("div",{staticClass:"row justify-center q-my-md"},[s("q-spinner-dots",{attrs:{color:"primary",size:"40px"}})],1)]},proxy:!0}])},[s("q-timeline",{attrs:{color:"grey-4"}},[s("q-timeline-entry",{scopedSlots:t._u([{key:"subtitle",fn:function(){return[s("div",[t._v("\n          "+t._s(t.$t("Video duration"))+"\n          "),s("q-chip",{attrs:{square:"",color:"primary","text-color":"white",icon:"movie"}},[t._v("\n            "+t._s(t.duration)+"\n          ")])],1)]},proxy:!0}])},[s("div",{staticClass:"text-caption text-grey-6"},[t._v("\n        "+t._s(t.$t("Tip: Click the time button below to perform a quick jump"))+"\n      ")])]),t._l(t.allDanmaku,(function(e,a){return s("q-timeline-entry",{key:a,scopedSlots:t._u([{key:"subtitle",fn:function(){return[s("q-chip",{attrs:{clickable:"",outline:"",square:"",color:"primary","text-color":"white",icon:"skip_next"},on:{click:function(s){return t.setPlayerCurrentTime(e.video_time)}}},[t._v("\n          "+t._s(t.$apc.utils.humanizeDuration(e.video_time))+"\n        ")])]},proxy:!0}],null,!0)},[s("div",[t._v("\n        "+t._s(e.content)+"\n      ")])])}))],2),t.noDanmakuToShow?s("div",{staticClass:"row q-my-sm"},[s("div",{staticClass:"col flex flex-center",staticStyle:{"min-height":"100px"}},[s("div",{staticClass:"text-subtitle2",staticStyle:{opacity:".4"}},[t._v("\n        "+t._s(t.$t("No danmaku yet"))+"\n      ")])])]):t._e()],1)},lt=[],ct=s("0831");const{setScrollPosition:mt}=ct["a"],ht=()=>{const t=300;mt(window,0,t)};var ut={name:"DanmakuItems",data(){return{pageNum:0,pageItems:[],noMorePages:!1}},computed:{hashId(){return this.$route.params.itemId},unlockInfo(){return this.$store.state.api.pageUnlockInfo[this.hashId]||{}},unlocked(){return this.$store.getters["api/isVideoUnlocked"](this.hashId)},allDanmaku(){return this.$store.state.api.pageDanmakuList[this.hashId]||[]},noDanmakuToShow(){return this.noMorePages&&this.allDanmaku.length<1},videoItem(){return this.$store.state.api.pageItemList[this.hashId]||{}},videoMeta(){return this.videoItem.meta||{}},duration(){return this.$apc.utils.humanizeDuration(this.videoMeta.duration)}},methods:{async processLoadPage(t,e){this.pageNum=t;const s={hash_id:this.hashId,limit:20,page:this.pageNum},a=await this.$apc.api("video_barrage/list",s);return this.pageItems=a.list.data,this.pageItems&&this.pageItems.forEach((t=>{this.$store.commit("api/pushPageDanmaku",{hashId:this.hashId,item:t})})),this.noMorePages=!a.list.next_page_url,e(this.noMorePages),this.pageItems},onPageLoad(t,e){this.processLoadPage(t,e).catch((t=>{const s=JSON.stringify(t);console.log(`Process failed: ${s}`),e(!0)}))},setPlayerCurrentTime(t){if(!this.unlocked)return this.$apc.notifyInfo(this.$t("Jump after unlocking the video"));const e=this.$apc.getPlyrInst(this.hashId);if(!e)return this.$apc.notifyInfo(this.$t("The player component is not initialized"));e.currentTime=t,ht()}}},dt=ut,pt=s("05eb"),gt=s("74af"),yt=s("b047"),ft=Object(f["a"])(dt,rt,lt,!1,null,null,null),bt=ft.exports;N()(ft,"components",{QInfiniteScroll:tt["a"],QTimeline:pt["a"],QTimelineEntry:gt["a"],QChip:yt["a"],QSpinnerDots:it["a"]});var vt={name:"CommentTab",components:{CommentItems:ot,DanmakuItems:bt},data(){return{currentTab:"commentList",commentScrollPosition:0,danmakuScrollPosition:0}},computed:{scrollBarStyleObj(){return{right:"-12px"}},scrollThumbStyleObj(){const t=this.$q.platform.is.mobile;return{opacity:"0.2",right:"-12px",width:t?"3px":"8px",borderRadius:t?"3px":"8px"}}},methods:{onCommentScroll(t){this.commentScrollPosition=t.verticalPosition},onDanmakuScroll(t){this.danmakuScrollPosition=t.verticalPosition},onPanelChanged(t,e){"commentList"===t?this.$refs.commentScrollArea.setScrollPosition(this.commentScrollPosition):this.$refs.danmakuScrollArea.setScrollPosition(this.danmakuScrollPosition)}}},kt=vt,_t=(s("6b95"),s("429b")),It=s("7460"),$t=s("adad"),Ct=s("823b"),xt=s("4983"),wt=Object(f["a"])(kt,F,H,!1,null,null,null),St=wt.exports;N()(wt,"components",{QCard:v["a"],QTabs:_t["a"],QTab:It["a"],QSeparator:at["a"],QTabPanels:$t["a"],QTabPanel:Ct["a"],QScrollArea:xt["a"],QTimeline:pt["a"]});var qt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",{attrs:{flat:""}},[s("q-card-section",{staticClass:"q-py-xs"},[s("div",{staticClass:"text-center text-grey-6"},[t._v(t._s(t.copyright))])])],1)},Pt=[],Lt=s("9224"),Tt={name:"Copyright",props:{copyright:{type:String,default:"Powered by "+Lt["a"]}}},Dt=Tt,Qt=Object(f["a"])(Dt,qt,Pt,!1,null,null,null),Ut=Qt.exports;N()(Qt,"components",{QCard:v["a"],QCardSection:P["a"]});var zt={name:"Detail",components:{CopyButton:n["a"],Player:A,CommentInput:R,CommentTab:St,Copyright:Ut},data(){return{metaTitle:"Cute Asian Amateur Babes",metaDescription:"Best collection of cute asian porn: Asian teens, Asian amateurs, Asian cute, Chinese cute, Chinese porn, young Asian sex, cute Japanese",metaKeywords:"Cute Asian, Asian teens, Cute teens, Amateur teens, Chinese cute, Chinese porn, Cute porn",copyText:"",remoteConfig:{},storedItem:{}}},computed:{username(){const t=this.$store.state.api.userAccount||{};return t.username||this.$t("Guest")},hashId(){return this.$route.params.itemId},importantTips(){const t=this.remoteConfig.video_unlock_duration||0,e=t>0?Math.floor(t/60):0;return this.$t("detailPageImportantTips",{videoUnlockDuration:e})}},created(){this.$apc.getRemoteConfig().then((t=>{this.remoteConfig=t})).catch((t=>{const e=JSON.stringify(t);console.log(`Process failed: ${e}`)})),this.setStoredItem().catch((t=>{const e=JSON.stringify(t);console.log(`Process failed: ${e}`)}))},mounted(){this.$gtag.event("enter_detail",{event_category:"enter_page",event_label:this.username+":"+this.storedItem.title}),this.notifyUseGoogleChrome()},beforeRouteLeave(t,e,s){this.$apc.destroyPlyrInst(this.hashId),this.$apc.destroyDanmakuInst(this.hashId),this.$store.commit("api/removePageComments",this.hashId),this.$store.commit("api/removePageDanmaku",this.hashId),s()},meta(){return{title:this.storedItem.title||this.metaTitle,titleTemplate:t=>`${t} - CutiesHub`,meta:{description:{name:"description",content:this.storedItem.desc||this.metaDescription},keywords:{name:"keywords",content:this.metaKeywords}}}},methods:{checkTag(t){this.$router.replace({name:"tag",params:{tag:t}})},async setStoredItem(){let t=this.$store.state.api.pageItemList[this.hashId];if(!t){const e=await this.$apc.api("video_item/getitem",{hash_id:this.hashId});t=e.item,this.$store.commit("api/pushPageItemList",{hashId:t.hash_id,item:t})}return this.storedItem=t||{},this.storedItem},notifyUseGoogleChrome(){let t=this.$q.sessionStorage.getItem("use_google_chrome_notify_cnt")||0;t<3&&(this.$apc.notifyInfo(this.$t("If you have trouble playing the video, please download the Google Chrome browser."),"bottom",3500),t++);try{this.$q.sessionStorage.set("use_google_chrome_notify_cnt",t)}catch(e){console.log(e)}}}},Ot=zt,Nt=s("9989"),jt=s("5096"),At=Object(f["a"])(Ot,a,i,!1,null,null,null);e["default"]=At.exports;N()(At,"components",{QPage:Nt["a"],QBar:S["a"],QSpace:q["a"],QBtn:k["a"],QPageScroller:jt["a"]})},f405:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-scroll-area",{class:t.scrollClass,attrs:{horizontal:t.horizontal,"thumb-style":t.scrollBarThumbStyleObj}},[s("div",{class:t.contentClass},t._l(t.images,(function(e,a){return s("div",{key:a,class:t.imageContainerClass,attrs:{"data-fancybox":"album",href:e}},[s("img",{staticClass:"column",style:t.imageStyleObj,attrs:{src:t.toThumbImgSrc(e),alt:"thumbnail"}})])})),0)])},i=[],n={name:"Album",props:{horizontal:{type:Boolean,default:!1},images:{type:Array,default(){return[]}}},computed:{scrollBarThumbStyleObj(){const t=this.$q.platform.is.mobile;return this.horizontal?{opacity:t?"0.2":"0.7",height:t?"3px":"8px",borderRadius:t?"3px":"8px"}:{opacity:"0.2",width:t?"3px":"8px",borderRadius:t?"3px":"8px"}},scrollClass(){return this.horizontal?"full-width shadow-2 rounded-scrollarea":"full-height shadow-2 rounded-scrollarea"},contentClass(){return this.horizontal?"album full-height q-gutter-x-xs row no-wrap":"album full-width q-gutter-y-xs"},imageContainerClass(){return this.horizontal?"full-height":"full-width"},imageStyleObj(){return this.horizontal?{"min-width":"50px",width:"auto",height:"100%"}:{"min-height":"50px",width:"100%",height:"auto"}}},methods:{toThumbImgSrc(t){const e=this.$apc.utils.dirname(t),s=this.$apc.utils.basename(t);return e+"/thumbnails/"+s}}},o=n,r=s("2877"),l=s("4983"),c=s("eebe"),m=s.n(c),h=Object(r["a"])(o,a,i,!1,null,null,null);e["a"]=h.exports;m()(h,"components",{QScrollArea:l["a"]})}}]);