(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"0bed":function(t,e,a){"use strict";a("840f")},"3c22":function(t,e,a){},6928:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"flex flex-start",attrs:{padding:""}},[a("div",{staticClass:"full-width q-pa-none q-gutter-y-sm"},[a("q-card",[a("q-img",{attrs:{ratio:16/9,src:"images/vip-card.jpg"},scopedSlots:t._u([{key:"loading",fn:function(){return[a("q-spinner-puff",{attrs:{thickness:1,size:"2rem",color:"primary"}})]},proxy:!0}])},[a("div",{staticClass:"absolute-bottom text-subtitle2 text-center"},[t._v("\n          "+t._s(t.$t("Join VIP Now"))+"\n        ")])])],1),a("q-stepper",{attrs:{vertical:"",animated:""},model:{value:t.step,callback:function(e){t.step=e},expression:"step"}},[a("q-step",{attrs:{color:"orange-4",name:1,title:t.$t("Select Product"),caption:t.getSelectedProduct().name,icon:"shopping_cart","active-icon":"shopping_cart",done:t.step>1}},[a("q-list",{staticClass:"rounded-borders",attrs:{bordered:""}},t._l(t.products,(function(e){return a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:e.id,attrs:{tag:"label"}},[a("q-item-section",{attrs:{side:"",top:""}},[a("q-radio",{attrs:{val:e.id},model:{value:t.selectedProductId,callback:function(e){t.selectedProductId=e},expression:"selectedProductId"}})],1),a("q-item-section",[a("q-item-label",{class:t.getLevelClass(e.extra.subscribe_days).label},[t._v("\n                "+t._s(e.name)+"\n              ")]),a("q-item-label",{attrs:{caption:""}},[a("span",{class:t.getLevelClass(e.extra.subscribe_days).caption},[t._v("\n                  "+t._s(t.$t("varsProductKeysPerDay",{keysNum:e.extra.daily_coins+" + n"}))),a("br"),t._v("\n                  "+t._s(t.$t("varsProductDaysOfVipPass",{daysNum:e.extra.subscribe_days}))+"\n                ")])])],1),a("q-item-section",{attrs:{side:""}},[a("q-badge",{class:t.getLevelClass(e.extra.subscribe_days).price,style:t.priceStyleObj,attrs:{label:"$"+e.price}}),t.calcDiscount(e)>0?a("span",{staticClass:"text-red-12"},[t._v("\n                "+t._s(t.calcDiscount(e))+"% OFF\n              ")]):t._e()],1)],1)})),1),a("q-stepper-navigation",[a("q-btn",{attrs:{color:"primary",label:t.$t("Next")},on:{click:t.gotoSelectGateway}})],1)],1),a("q-step",{attrs:{color:"teal-4",name:2,title:t.$t("Select Payment Method"),caption:t.getSelectedGateway().show_name,icon:"payments","active-icon":"payments",done:t.step>2}},[a("q-list",{staticClass:"rounded-borders",attrs:{bordered:""}},t._l(t.gateways,(function(e){return a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:e.id,attrs:{tag:"label",clickable:""}},[a("q-item-section",{attrs:{side:"",top:""}},[a("q-radio",{attrs:{val:e.id},model:{value:t.selectedGatewayId,callback:function(e){t.selectedGatewayId=e},expression:"selectedGatewayId"}})],1),a("q-item-section",[a("q-item-label",[t._v("\n                "+t._s(e.show_name||e.group.show_name)+"\n              ")]),a("q-item-label",{attrs:{caption:""}},[t._v("\n                "+t._s(e.desc||e.group.desc)+"\n              ")])],1),a("q-item-section",{attrs:{avatar:""}},[e.icon||e.group.icon?a("q-avatar",{attrs:{rounded:""}},[a("img",{attrs:{src:e.icon||e.group.icon}})]):a("q-avatar",{attrs:{rounded:"",color:"deep-orange-12","font-size":"1.6rem","text-color":"white",icon:"payment"}})],1)],1)})),1),a("q-stepper-navigation",[a("q-btn",{attrs:{loading:t.purchaseLoading,color:"primary",label:t.$t("Pay Now")},on:{click:t.purchase}}),a("q-btn",{staticClass:"q-ml-sm",attrs:{flat:"",color:"primary",label:t.$t("Previous")},on:{click:t.gotoSelectProduct}})],1)],1),a("q-step",{attrs:{color:"green-4",name:3,title:t.$t("Complete Payment"),icon:"redeem","active-icon":"redeem"}},[a("div",[t._v("\n          "+t._s(t.$t("After payment, please click the Complete Payment button"))+"\n        ")]),a("q-stepper-navigation",[a("q-btn",{attrs:{color:"primary",label:t.$t("btnLabelCompletePayment")},on:{click:t.finishPayment}}),a("q-btn",{staticClass:"q-ml-sm",attrs:{flat:"",color:"primary",label:t.$t("btnLabelReorder")},on:{click:t.reorder}})],1)],1)],1)],1),a("q-dialog",{attrs:{persistent:""},on:{hide:t.dialogGiftCardsListHide},model:{value:t.dialogGiftCardsList,callback:function(e){t.dialogGiftCardsList=e},expression:"dialogGiftCardsList"}},[a("q-layout",{staticClass:"bg-white",attrs:{view:"hHh lpR fFf",container:""}},[a("q-header",{staticClass:"bg-primary text-white",attrs:{elevated:""}},[a("q-toolbar",[a("q-btn",{attrs:{dense:"",flat:"",round:"",icon:"menu"},on:{click:function(e){t.dialogGiftCardsListShowLeft=!t.dialogGiftCardsListShowLeft}}}),a("q-toolbar-title",{staticClass:"text-subtitle2"},[t._v("\n            "+t._s(t.selectedGiftCard.show_name)+"\n          ")]),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[a("q-tooltip",[t._v(t._s(t.$t("Close")))])],1)],1)],1),a("q-drawer",{attrs:{side:"left",width:220,breakpoint:500,overlay:"",bordered:"","no-swipe-open":"","no-swipe-close":"","no-swipe-backdrop":""},model:{value:t.dialogGiftCardsListShowLeft,callback:function(e){t.dialogGiftCardsListShowLeft=e},expression:"dialogGiftCardsListShowLeft"}},[a("q-scroll-area",{staticClass:"fit"},[a("q-list",{staticClass:"cards-list",attrs:{padding:""}},[a("q-item-label",{attrs:{header:""}},[a("span",{staticClass:"text-weight-bold"},[t._v(t._s(t.$t("Please select a gift card")))])]),a("q-item-label",{staticClass:"q-pl-md",attrs:{caption:""}},[t._v(t._s(t.$t("Local")))]),a("q-separator",{attrs:{spaced:"",inset:""}}),t.localGiftCardsTotal<=0?a("q-item",[a("q-item-section",[a("q-item-label",{staticClass:"text-grey-5"},[t._v(t._s(t.$t("No gift card to choose")))])],1)],1):t._e(),t._l(t.localGiftCardsList,(function(e,s){return a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:s,attrs:{active:t.selectedGiftCard.name===s,clickable:""},on:{click:function(e){return t.processPurchaseGiftCard(s)}}},[a("q-item-section",{attrs:{avatar:""}},[e.icon?a("q-avatar",{attrs:{rounded:""}},[a("img",{attrs:{src:e.icon}})]):a("q-avatar",{attrs:{rounded:"",color:"red","text-color":"white",icon:"card_giftcard"}})],1),a("q-item-section",[t._v("\n                "+t._s(e.show_name)+"\n              ")])],1)})),a("q-item-label",{staticClass:"q-pl-md q-pt-sm",attrs:{caption:""}},[t._v(t._s(t.$t("All")))]),a("q-separator",{attrs:{spaced:"",inset:""}}),t.giftCardsTotal<=0?a("q-item",[a("q-item-section",[a("q-item-label",[t._v(t._s(t.$t("No gift card to choose")))])],1)],1):t._e(),t._l(t.giftCardsList,(function(e,s){return a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:s,attrs:{active:t.selectedGiftCard.name===s,clickable:""},on:{click:function(e){return t.processPurchaseGiftCard(s)}}},[a("q-item-section",{attrs:{avatar:""}},[e.icon?a("q-avatar",{attrs:{rounded:""}},[a("img",{attrs:{src:e.icon}})]):a("q-avatar",{attrs:{rounded:"",color:"red","text-color":"white",icon:"card_giftcard"}})],1),a("q-item-section",[t._v("\n                "+t._s(e.show_name)+"\n              ")])],1)}))],2)],1)],1),a("q-page-container",[t.giftCardPurchaseData.selectedGiftCardInfo?a("q-page",{attrs:{padding:""}},[a("div",{staticClass:"tutorial-step"},[a("div",{staticClass:"step-title"},[t._v("\n              "+t._s(t.$t("Question: How To Get VIP Membership?"))+"\n            ")]),a("div",{staticClass:"step-title"},[t._v("\n              "+t._s(t.$t("Answer:"))+"\n            ")]),a("div",{staticClass:"step-content"},[a("div",{staticClass:"text-weight-bold",staticStyle:{"max-width":"75%"}},[t._v("\n                "+t._s(t.$t("Purchase a gift card and send the gift card redemption code or picture to the email below."))+"\n              ")]),a("q-bar",{staticClass:"transparent q-pa-none"},[a("div",{staticStyle:{"max-width":"75%"}},[a("div",{staticClass:"text-body2 ellipsis"},[a("a",{attrs:{target:"__blank",noopener:"",noreferrer:"",href:"mailto:"+t.giftCardPurchaseData.sendToEmail}},[t._v("\n                      "+t._s(t.giftCardPurchaseData.sendToEmail)+"\n                    ")])])]),a("q-space"),a("CopyButton",{attrs:{text:t.giftCardPurchaseData.sendToEmail}})],1)],1)]),a("div",{staticClass:"tutorial-step"},[a("div",{staticClass:"step-content"},[t._v("\n              "+t._s(t.$t("After verifying the gift card you sent, we will upgrade your account to VIP."))+"\n            ")])]),t.giftCardsTutorials[t.selectedGiftCard.name]?a("hr"):t._e(),t.giftCardsTutorials[t.selectedGiftCard.name]?a("div",{staticClass:"tutorial-step detail-step"},[a("div",{staticClass:"step-title detail-title"},[t._v(t._s(t.$t("Purchase Guide")))]),a("div",{staticClass:"step-content detail-tutorial",domProps:{innerHTML:t._s(t.giftCardsTutorials[t.selectedGiftCard.name])}})]):t._e()]):t._e()],1)],1)],1)],1)},i=[],r=a("7053"),o=a.n(r),c=(a("e6cf"),a("13d5"),a("a79d"),a("5319"),a("6c03"));const n={level_0:{label:{"text-indigo-3":!0},caption:{"text-grey-6":!0},price:{"bg-indigo-3":!0,"text-white":!0}},level_1:{label:{"text-brown-13":!0},caption:{"text-grey-6":!0},price:{"bg-brown-13":!0,"text-white":!0}},level_2:{label:{"text-blue-grey-4":!0},caption:{"text-blue-grey-4":!0},price:{"bg-blue-grey-4":!0,"text-white":!0}},level_3:{label:{"text-orange-6":!0},caption:{"text-orange-6":!0},price:{"bg-orange-6":!0,"text-white":!0}}},l={"font-size":"14px","line-height":"14px",padding:"4px 6px"};var d={name:"Payments",components:{CopyButton:c["a"]},data(){return{products:[],gateways:[],step:1,productClassObjs:n,priceStyleObj:l,selectedProductId:0,selectedGatewayId:0,purchaseLoading:!1,orderData:{},defaultPurchaseParams:{},dialogGiftCardsList:!1,dialogGiftCardsListShowLeft:!0,giftCardsList:{},localGiftCardsList:{},giftCardsTutorials:{},selectedGiftCard:{},giftCardPurchaseData:{},dismissGiftCardNotify:null}},computed:{username(){const t=this.$store.state.api.userAccount||{};return t.username||this.$t("Guest")},giftCardsTotal(){return Object.keys(this.giftCardsList).length},localGiftCardsTotal(){return Object.keys(this.localGiftCardsList).length}},created(){this.processGetProducts().catch((t=>{const e=JSON.stringify(t);console.log(`Process failed: ${e}`)})),this.processGetGateways().catch((t=>{const e=JSON.stringify(t);console.log(`Process failed: ${e}`)}))},mounted(){this.$gtag.event("enter_payments",{event_category:"enter_page",event_label:this.username})},beforeRouteLeave(t,e,a){"function"===typeof this.dismissGiftCardNotify&&this.dismissGiftCardNotify(),this.$store.commit("dialogs/showDialog","ShareOpinions"),a()},methods:{async processGetProducts(){const t={cat_slug:"VIDEO_VIP_SUBSCRIBE",limit:3,page:1},e=await this.$apc.api("product_item/list",t);return this.products=e.list.data,this.selectedProductId=this.getMaxPriceProduct().id,this.products},async processGetGateways(){const t=await this.$apc.authApi("pay_gateway/list");return this.gateways=t.gateways,this.selectedGatewayId=this.getFirstGateway().id,this.gateways},async processPurchase(){const t=await this.$apc.authApi("pay_order/generate",{products:this.selectedProductId});this.orderData=t.order,this.defaultPurchaseParams={gateway_id:this.selectedGatewayId,order_code:this.orderData.code};let e=null;const a=this.getSelectedGateway().invoke_name;switch(a){case"SpankPay_ExpressInContext":{const t=await this.$apc.authApi("pay_order/purchase",this.defaultPurchaseParams);e=t.response,await this.processPurchaseSpankPay(e);break}case"GiftCard_OtcManual":{const t=await this.$apc.authApi("pay_order/listgiftcards",{order_code:this.orderData.code,options:JSON.stringify({buy_url_params:{orderMoney:this.orderData.money}})});this.localGiftCardsList=t.local,this.giftCardsList=t.all,e=t,await this.processPurchaseGiftCard(null,!0);break}default:this.$apc.throwApiError(`No method to process gateway invoke name ${a}`);break}return e},async processPurchaseSpankPay(t){const e=t.invoice_params;e.onPayment=t=>{console.log(`Payment ${t.status}`)},this.step=3},async processPurchaseGiftCard(t=null,e=!1){t||(t=this.localGiftCardsTotal>0?Object.keys(this.localGiftCardsList)[0]:this.giftCardsTotal>0?Object.keys(this.giftCardsList)[0]:null),t||this.$apc.throwNotifyError("No supported gift card"),this.selectedGiftCard=this.giftCardsList[t]||{};const a=await this.$apc.authApi("pay_order/getgiftcardtutorial",{name:this.selectedGiftCard.name,order_code:this.orderData.code});this.giftCardsTutorials[this.selectedGiftCard.name]=a.tutorial,this.dialogGiftCardsList=!0;const s=await this.$apc.authApi("pay_order/purchase",o()(o()({},this.defaultPurchaseParams),{options:JSON.stringify({giftCardsOptions:{buy_url_params:{orderMoney:this.orderData.money}},selectedGiftCard:this.selectedGiftCard.name})})),i=s.response;this.giftCardPurchaseData=i.purchase_params,this.dialogGiftCardsListShowLeft=!!e,this.step=3},dialogGiftCardsListHide(){this.dismissGiftCardNotify=this.$q.notify({icon:"info",message:this.$t("View the tutorial again"),position:"bottom",timeout:0,color:"primary",actions:[{label:this.$t("btnLabelView"),color:"white",handler:()=>{this.dialogGiftCardsList=!0,this.dismissGiftCardNotify()}}]})},getProductById(t){return this.products.find((e=>e.id===t))},getMaxPriceProduct(){return this.products.reduce(((t,e)=>parseFloat(t.price)>parseFloat(e.price)?t:e),{})},getSelectedProduct(){const t=this.getProductById(this.selectedProductId)||this.getMaxPriceProduct();return t},getLevelClass(t){return t>0&&t<=30?n.level_1:t>30&&t<=180?n.level_2:t>180?n.level_3:n.level_0},calcDiscount(t){const e=this.products[0],a=e.price/e.extra.subscribe_days,s=t.price/t.extra.subscribe_days,i=100-Math.round(s/a*100);return i},getGatewayById(t){return this.gateways.find((e=>e.id===t))},getFirstGateway(){return this.gateways[0]||{}},getSelectedGateway(){const t=this.getGatewayById(this.selectedGatewayId)||this.getFirstGateway();return t},gotoSelectGateway(){this.$gtag.event("goto_select_gateway",{event_category:"click",event_label:this.username+":"+this.getSelectedProduct().name}),this.step=2},purchase(){this.$gtag.event("click_purchase",{event_category:"click",event_label:this.username+":"+this.getSelectedProduct().name}),this.purchaseLoading=!0,this.processPurchase().catch((t=>{const e=JSON.stringify(t);console.log(`Process failed: ${e}`),console.log(t)})).finally((()=>{this.purchaseLoading=!1}))},gotoSelectProduct(){this.$gtag.event("goto_select_product",{event_category:"click",event_label:this.username+":"+this.getSelectedProduct().name}),this.step=1},finishPayment(){this.$gtag.event("finish_payment",{event_category:"click",event_label:this.username+":"+this.getSelectedProduct().name}),this.$router.replace("/")},reorder(){this.$gtag.event("reorder",{event_category:"click",event_label:this.username+":"+this.getSelectedProduct().name}),"function"===typeof this.dismissGiftCardNotify&&this.dismissGiftCardNotify(),this.step=1}}},p=d,u=(a("6b0a"),a("0bed"),a("2877")),h=a("9989"),g=a("f09f"),f=a("068f"),m=a("06d5"),y=a("f531"),b=a("87fe"),_=a("1c1c"),v=a("66e5"),C=a("4074"),w=a("3786"),q=a("0170"),P=a("58a81"),G=a("b19c"),x=a("9c40"),$=a("cb32"),L=a("24e8"),S=a("4d5a"),k=a("e359"),I=a("65c6"),Q=a("6ac5"),N=a("05c0"),D=a("9404"),T=a("4983"),O=a("eb85"),A=a("09e3"),B=a("d847"),j=a("2c91"),E=a("714f"),M=a("7f67"),F=a("eebe"),J=a.n(F),V=Object(u["a"])(p,s,i,!1,null,"00ef768a",null);e["default"]=V.exports;J()(V,"components",{QPage:h["a"],QCard:g["a"],QImg:f["a"],QSpinnerPuff:m["a"],QStepper:y["a"],QStep:b["a"],QList:_["a"],QItem:v["a"],QItemSection:C["a"],QRadio:w["a"],QItemLabel:q["a"],QBadge:P["a"],QStepperNavigation:G["a"],QBtn:x["a"],QAvatar:$["a"],QDialog:L["a"],QLayout:S["a"],QHeader:k["a"],QToolbar:I["a"],QToolbarTitle:Q["a"],QTooltip:N["a"],QDrawer:D["a"],QScrollArea:T["a"],QSeparator:O["a"],QPageContainer:A["a"],QBar:B["a"],QSpace:j["a"]}),J()(V,"directives",{Ripple:E["a"],ClosePopup:M["a"]})},"6b0a":function(t,e,a){"use strict";a("3c22")},"6c03":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-btn",{attrs:{padding:"5px 10px",color:t.color,size:t.size,flat:t.flat,label:t.btnLabel},on:{click:t.copyToClipboard}})},i=[],r=a("cdde"),o={name:"CopyButton",props:{text:[Function,String],color:{type:String,default:"primary"},size:{type:String,default:"sm"},flat:{type:Boolean,default:!1}},data(){return{copied:!1,btnLabel:this.$t("btnLabelCopy")}},methods:{copyToClipboard(){const t=this.$q.platform.is.mobile?"bottom":"top-right";Object(r["a"])("string"===typeof this.text?this.text:this.text()).then((()=>{this.copied=!0,this.$q.notify({icon:"sentiment_satisfied_alt",message:this.$t("Copy successfully"),position:t,timeout:2e3})})).catch((()=>{this.copied=!1,this.$q.notify({icon:"sentiment_very_dissatisfied",message:this.$t("Copy failed, please copy it manually"),position:t,timeout:2e3})}))}}},c=o,n=a("2877"),l=a("9c40"),d=a("eebe"),p=a.n(d),u=Object(n["a"])(c,s,i,!1,null,null,null);e["a"]=u.exports;p()(u,"components",{QBtn:l["a"]})},"840f":function(t,e,a){}}]);